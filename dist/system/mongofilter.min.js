/*https://github.com/malko/mongofilter brought to you under MIT licence by J.Gotti & A.Gibrat version: 1.0.4*/
System.register("mongofilter",[],function(n){"use strict";function r(n,r,e,u){var i=void 0;return i=Array.isArray(r)?r[p[e]](function(r,e){return t(r,e,u)(n)}):Object.keys(r)[p[e]](function(e){return t(r[e],e,u)(n)}),"$nor"===e?!i:i}function e(n,r,e){var u=!0;return u=l(r)?y.$eq(n[e],r):Array.isArray(r)?y.$in(n[e],r):t(r,"$and",e)(n)}function t(n,t,u){return t=v[t]||t||"$and",function(i){if("string"==typeof i)try{i=JSON.parse(i)}catch(o){return!1}return t in p?r(i,n,t,u):t in y?y[t](i[u],n):e(i,n,t)}}function u(n){if("string"==typeof n&&(n=JSON.parse(n)),!n||l(n))throw new TypeError("Invalid query");var r=t(n);return r.filter=function(n){return n&&n.filter?n.filter(r):[]},r.filterItem=r,r}var i,o,f,c,$,a,s,l,g,y,p,v;return n("default",u),{setters:[],execute:function(){i=/(^|[^%])%(?!%)/g,o=/(^|[^\\])(_+)/g,f=function(n,r,e){return r+new Array(e.length+1).join(".")},c=function(n){return new RegExp("^"+n.replace(i,"$1.*").replace(o,f)+"$")},$=/^\/([\s\S]*)\/([igm]*)$/,a=/^(string|number|boolean)$/,s=function(n){return"string"==typeof n&&!function(){var r=void 0;n.replace($,function(e,t,u){n=t,r=u}),n=r?new RegExp(n,r):new RegExp(n)}(),n},l=function(n){return null==n||a.test(typeof n)},g=function(n){return null!=n},y={$gt:function(n,r){return n>r},$gte:function(n,r){return n>=r},$lt:function(n,r){return r>n},$lte:function(n,r){return r>=n},$eq:function(n,r){return n===r},$ne:function(n,r){return n!==r},$regex:function(n,r){return g(n)&&s(r).test(n)},$like:function(n,r){return g(n)&&c(r).test(n)},$nlike:function(n,r){return!y.$like(n,r)},$in:function(n,r){return!!~r.indexOf(n)},$nin:function(n,r){return!y.$in(n,r)}},p={$or:"some",$nor:"some",$and:"every"},v={$e:"$eq",$neq:"$ne"},u.aliases=v,u.comparators=y}}});
