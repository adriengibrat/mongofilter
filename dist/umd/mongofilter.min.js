/*https://github.com/malko/mongofilter brought to you under MIT licence by J.Gotti & A.Gibrat version: 1.0.4*/
!function(n,e){if("function"==typeof define&&define.amd)define("mongofilter",["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var r={exports:{}};e(r.exports,r),n.mongofilter=r.exports}}(this,function(n,e){"use strict";function r(n,e,r,t){var o=void 0;return o=Array.isArray(e)?e[g[r]](function(e,r){return i(e,r,t)(n)}):Object.keys(e)[g[r]](function(r){return i(e[r],r,t)(n)}),"$nor"===r?!o:o}function t(n,e,r){var t=!0;return t=p(e)?y.$eq(n[r],e):Array.isArray(e)?y.$in(n[r],e):i(e,"$and",r)(n)}function i(n,e,i){return e=m[e]||e||"$and",function(o){if("string"==typeof o)try{o=JSON.parse(o)}catch(u){return!1}return e in g?r(o,n,e,i):e in y?y[e](o[i],n):t(o,n,e)}}function o(n){if("string"==typeof n&&(n=JSON.parse(n)),!n||p(n))throw new TypeError("Invalid query");var e=i(n);return e.filter=function(n){return n&&n.filter?n.filter(e):[]},e.filterItem=e,e}e.exports=o;var u=/(^|[^%])%(?!%)/g,f=/(^|[^\\])(_+)/g,c=function(n,e,r){return e+new Array(r.length+1).join(".")},s=function(n){return new RegExp("^"+n.replace(u,"$1.*").replace(f,c)+"$")},$=/^\/([\s\S]*)\/([igm]*)$/,a=/^(string|number|boolean)$/,l=function(n){return"string"==typeof n&&!function(){var e=void 0;n.replace($,function(r,t,i){n=t,e=i}),n=e?new RegExp(n,e):new RegExp(n)}(),n},p=function(n){return null==n||a.test(typeof n)},d=function(n){return null!=n},y={$gt:function(n,e){return n>e},$gte:function(n,e){return n>=e},$lt:function(n,e){return e>n},$lte:function(n,e){return e>=n},$eq:function(n,e){return n===e},$ne:function(n,e){return n!==e},$regex:function(n,e){return d(n)&&l(e).test(n)},$like:function(n,e){return d(n)&&s(e).test(n)},$nlike:function(n,e){return!y.$like(n,e)},$in:function(n,e){return!!~e.indexOf(n)},$nin:function(n,e){return!y.$in(n,e)}},g={$or:"some",$nor:"some",$and:"every"},m={$e:"$eq",$neq:"$ne"};o.aliases=m,o.comparators=y});
