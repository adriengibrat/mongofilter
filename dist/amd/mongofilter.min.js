/*https://github.com/malko/mongofilter brought to you under MIT licence by J.Gotti & A.Gibrat version: 1.0.4*/
define("mongofilter",["exports","module"],function(n,r){"use strict";function e(n,r,e,t){var u=void 0;return u=Array.isArray(r)?r[d[e]](function(r,e){return i(r,e,t)(n)}):Object.keys(r)[d[e]](function(e){return i(r[e],e,t)(n)}),"$nor"===e?!u:u}function t(n,r,e){var t=!0;return t=p(r)?y.$eq(n[e],r):Array.isArray(r)?y.$in(n[e],r):i(r,"$and",e)(n)}function i(n,r,i){return r=v[r]||r||"$and",function(u){if("string"==typeof u)try{u=JSON.parse(u)}catch(o){return!1}return r in d?e(u,n,r,i):r in y?y[r](u[i],n):t(u,n,r)}}function u(n){if("string"==typeof n&&(n=JSON.parse(n)),!n||p(n))throw new TypeError("Invalid query");var r=i(n);return r.filter=function(n){return n&&n.filter?n.filter(r):[]},r.filterItem=r,r}r.exports=u;var o=/(^|[^%])%(?!%)/g,f=/(^|[^\\])(_+)/g,c=function(n,r,e){return r+new Array(e.length+1).join(".")},$=function(n){return new RegExp("^"+n.replace(o,"$1.*").replace(f,c)+"$")},a=/^\/([\s\S]*)\/([igm]*)$/,l=/^(string|number|boolean)$/,s=function(n){return"string"==typeof n&&!function(){var r=void 0;n.replace(a,function(e,t,i){n=t,r=i}),n=r?new RegExp(n,r):new RegExp(n)}(),n},p=function(n){return null==n||l.test(typeof n)},g=function(n){return null!=n},y={$gt:function(n,r){return n>r},$gte:function(n,r){return n>=r},$lt:function(n,r){return r>n},$lte:function(n,r){return r>=n},$eq:function(n,r){return n===r},$ne:function(n,r){return n!==r},$regex:function(n,r){return g(n)&&s(r).test(n)},$like:function(n,r){return g(n)&&$(r).test(n)},$nlike:function(n,r){return!y.$like(n,r)},$in:function(n,r){return!!~r.indexOf(n)},$nin:function(n,r){return!y.$in(n,r)}},d={$or:"some",$nor:"some",$and:"every"},v={$e:"$eq",$neq:"$ne"};u.aliases=v,u.comparators=y});
