/*https://github.com/malko/mongofilter brought to you under MIT licence by J.Gotti & A.Gibrat version: 1.0.5*/
define("mongofilter",["exports","module"],function(n,r){"use strict";function t(n,r,t,e){var i=void 0;return i=Array.isArray(r)?r[d[t]](function(r,t){return u(r,t,e)(n)}):Object.keys(r)[d[t]](function(t){return u(r[t],t,e)(n)}),"$nor"===t||"$not"===t?!i:i}function e(n,r,t){var e=!0;return e=p(r)?y.$eq(n[t],r):Array.isArray(r)?y.$in(n[t],r):u(r,"$and",t)(n)}function u(n,r,u){return r=v[r]||r||"$and",function(i){if("string"==typeof i)try{i=JSON.parse(i)}catch(o){return!1}return r in d?t(i,n,r,u):r in y?y[r](i[u],n):e(i,n,r)}}function i(n){if("string"==typeof n&&(n=JSON.parse(n)),!n||p(n))throw new TypeError("Invalid query");var r=u(n);return r.filter=function(n){return n&&n.filter?n.filter(r):[]},r.filterItem=r,r.or=function(r){return i({$or:[n,r]})},r.and=function(r){return i({$and:[n,r]})},r}r.exports=i;var o=/(^|[^%])%(?!%)/g,f=/(^|[^\\])(_+)/g,c=function(n,r,t){return r+new Array(t.length+1).join(".")},$=function(n){return new RegExp("^"+n.replace(o,"$1.*").replace(f,c)+"$")},a=/^\/([\s\S]*)\/([igm]*)$/,l=/^(string|number|boolean)$/,s=function(n){return"string"==typeof n&&!function(){var r=void 0;n.replace(a,function(t,e,u){n=e,r=u}),n=r?new RegExp(n,r):new RegExp(n)}(),n},p=function(n){return null==n||l.test(typeof n)},g=function(n){return null!=n},y={$gt:function(n,r){return n>r},$gte:function(n,r){return n>=r},$lt:function(n,r){return r>n},$lte:function(n,r){return r>=n},$eq:function(n,r){return n===r},$ne:function(n,r){return n!==r},$regex:function(n,r){return g(n)&&s(r).test(n)},$like:function(n,r){return g(n)&&$(r).test(n)},$nlike:function(n,r){return!y.$like(n,r)},$in:function(n,r){return!!~r.indexOf(n)},$nin:function(n,r){return!y.$in(n,r)}},d={$or:"some",$nor:"every",$and:"every",$not:"some"},v={$e:"$eq",$neq:"$ne"};i.aliases=v,i.comparators=y});
